## 前提・要約

- 目的：血圧記録アプリの見た目と操作性を「清潔感のある医療系デザイン」「高齢者でも使いやすい大きく見やすいUI」に寄せ、全画面で統一感のあるUIに整える。
- 成果物：
  - `css/style.css` のデザイン刷新（デザイントークン/コンポーネントスタイル/レスポンシブ/アクセシビリティ）
  - `index.html` の軽微な構造整理（セクション分割、カード化、アイコン/フォント読込）
  - 見た目の確認チェックリスト（簡易）
- 対象の種類（推定）：改修（UI/スタイル改善）。既存機能は変えずに視覚・操作性を改善するため。
- 成功条件（Done）：
  - 主要画面（入力、一覧、グラフ、モーダル等）の見た目が統一され、タップ領域48px以上・最小フォント16px以上で操作できる
  - スマホ/タブレット/PCで崩れずに表示される（想定ブレークポイントで確認）
  - ボタン/入力/カード/テーブルのスタイルが「部品として再利用できる」状態になっている
  - フォーカスリング等のアクセシビリティが担保されている
- 前提（仮定した点があれば明記）：
  - 既存HTMLはPhase1〜3で作成済みで、入力フォーム・一覧・グラフ用のUI要素が存在する
  - CSSは単一ファイル（`css/style.css`）で管理し、フレームワーク導入はしない
- 主要な制約：
  - PWA（モバイルファースト）前提、低スペック端末でも重くしない（過度なアニメ/巨大画像を避ける）
  - 既存JSのDOM参照が壊れないよう、id/主要クラス名は必要に応じて維持する
- 既知の不明点（あれば）：
  - 現在の `index.html` のDOM構造（セクションの切り方、クラス名）が未確認
  - どのアイコンセット（Material Icons / Font Awesome）の好み

## 全体ステップ構成

- Step4-1: デザインの洗練（本回答の範囲）
- Step4-2: グラフ機能の強化
- Step4-3: データエクスポート機能
- Step4-4: 通知・リマインダー機能
- Step4-5: オフライン対応の強化
- Step4-6: ヘルプ・チュートリアル機能
- Step4-7: 最終テストと最適化

---

## Step4-1: デザインの洗練

### Plan 1: デザイン方針の固定とデザイントークン（CSS変数）導入

- 目的：色・余白・角丸・影・文字サイズを「変数化」して、全体の統一と今後の変更容易性を確保する。
- 作業内容（チェックリスト）：
  -
- 変更対象（想定ファイル/モジュール）：
  - `css/style.css`
- 受け入れ基準（完了条件）：
  - 主要な色・余白・角丸が変数から参照され、ハードコードが最小限
  - 以後のPlanで「変数を使って」スタイルが追加されている
- テスト/検証：
  - ブラウザで読み込み、色/フォントが反映されることを目視確認
- 依存関係・注意点：
  - 既存CSSの指定が強い（詳細度が高い）場合、トークンが効かない可能性 → 先に不要な強い指定を弱める
- リスクと回避策：
  - リスク：一括置換で崩れる
  - 回避：小さく段階的に適用し、セクション単位で確認しながら進める（コミットを細かく）

### Plan 2: タイポグラフィとページ骨格（ヘッダー/コンテナ/カード）を整備

- 目的：情報の階層が分かる見た目（見出し→本文→補助情報）と、カード区切りで「迷わない」画面構成を作る。
- 作業内容（チェックリスト）：
  -
- 変更対象（想定ファイル/モジュール）：
  - `index.html`
  - `css/style.css`
- 受け入れ基準（完了条件）：
  - 画面がカード単位で区切られ、どこが入力/一覧/グラフか一目で分かる
  - 見出しと本文のメリハリがあり、最小16px・行間1.6相当が担保されている
- テスト/検証：
  - スマホ幅（360〜430px）で表示確認：横スクロールが出ない
  - タブレット幅（768px前後）で表示確認：余白が広がりすぎない
- 依存関係・注意点：
  - JSが特定DOM構造に依存している場合、要素移動で壊れる → id属性は維持し、移動は最小限
- リスクと回避策：
  - リスク：構造変更でイベントが動かなくなる
  - 回避：DOMのid/データ属性は維持、変更前後で主要フロー（入力→保存→一覧更新→グラフ更新）を必ず確認

### Plan 3: 入力フォーム/ボタン/メッセージ表示のコンポーネント統一

- 目的：操作部品の見た目と挙動（hover/active/disabled/focus）を統一し、誤操作しにくいUIにする。
- 作業内容（チェックリスト）：
  -
- 変更対象（想定ファイル/モジュール）：
  - `css/style.css`
  - `index.html`（必要ならクラス付与のみ）
- 受け入れ基準（完了条件）：
  - すべての主要ボタンが同じルール（色/角丸/影/状態）で表現されている
  - フォーカス時に視認できるリング/枠が表示され、キーボード操作でも迷子にならない
  - エラーが「どこを直せばよいか」分かる表示になっている
- テスト/検証：
  - フォームのバリデーションエラーを意図的に発生させて表示確認
  - disabled状態（送信中など）を仮で作り見た目確認
- 依存関係・注意点：
  - 既存のクラス設計がない場合、増やし過ぎると管理が難しい → “最小の共通クラス”に抑える
- リスクと回避策：
  - リスク：CSSが肥大化
  - 回避：コンポーネント単位でセクションを区切り、命名規則（例：`.btn`, `.btn--primary`）を固定

### Plan 4: アイコン/フォント導入と視覚的ヒントの追加

- 目的：機能の意味が直感的に伝わるよう、アイコンと読みやすいフォントを導入する。
- 作業内容（チェックリスト）：
  -
- 変更対象（想定ファイル/モジュール）：
  - `index.html`
  - `css/style.css`
- 受け入れ基準（完了条件）：
  - フォントが反映され、日本語が読みやすい印象になっている
  - 主要操作がアイコンで補助され、意味が伝わりやすい
- テスト/検証：
  - オフライン時（PWAキャッシュ）でも表示が破綻しないか簡易確認（フォント/アイコンの扱いに注意）
- 依存関係・注意点：
  - CDN依存になるため、PWAキャッシュ戦略と整合が必要（Step4-5で強化予定）
- リスクと回避策：
  - リスク：フォント読み込みで表示が遅れる
  - 回避：`font-display`相当の配慮（可能なら）、フォールバックフォントを明記

### Plan 5: レスポンシブ最適化とアクセシビリティ最終調整

- 目的：スマホ/タブレット/PCで快適に使え、年齢層が高くても操作しやすいUIに仕上げる。
- 作業内容（チェックリスト）：
  -
- 変更対象（想定ファイル/モジュール）：
  - `css/style.css`
  - `index.html`
- 受け入れ基準（完了条件）：
  - スマホ/タブレット/PCでレイアウト崩れがない
  - タップ領域48px以上、最小フォント16px以上、フォーカス可視化が担保されている
  - 一覧・グラフが画面幅に応じて“読める状態”を保っている
- テスト/検証：
  - 端末/エミュレーションで3幅（スマホ/タブレット/PC）確認
  - Lighthouse（可能なら）でアクセシビリティ項目を確認し、大きな指摘がない
- 依存関係・注意点：
  - 一覧の表示形式（テーブル or カード）はUXが大きく変わる → 既存実装のまま改善する方針を優先
- リスクと回避策：
  - リスク：レスポンシブ対応で要素が詰まる/崩れる
  - 回避：
    - まずスマホで完成→次にタブレット/PCへ拡張（モバイルファーストを徹底）
    - 変更は1カ所ずつ、都度画面確認

---

### 追加メモ（運用）

- 推奨コミット粒度：Plan単位でコミット（例：`Step4-1 Plan1: design tokens`）。
- 可能ならスクリーンショットを残す：Before/Afterで差分を把握しやすくする。

