## 前提・要約
- 目的：
  - Phase 1（基礎版）の最初のユーザー接点として、血圧データを手動入力できる「入力フォームUI」をモバイルファーストで実装する。
- 成果物：
  - 入力フォーム（家族メンバー選択、最高/最低血圧、脈拍、測定日時、記録/クリアボタン）を含む画面UI
  - モバイルで見やすく、タップしやすいスタイル（CSS）
  - 測定日時（datetime-local）のデフォルトが「現在日時」になる初期化（最小限）
- 対象の種類（推定）：
  - 新規開発（Phase 1 Step 1-2として、入力フォームUIを新規に追加するため）
- 成功条件（Done）：
  - スマホ表示で入力フォームが崩れず、全要素が1画面内で自然に操作できる（スクロールは許容）
  - タップ領域が最低44px相当を満たし、フォントサイズが16px以上で可読性がある
  - 最高/最低血圧・脈拍・日時の入力がしやすい（ラベル、プレースホルダ/ヒント、適切な入力タイプ）
  - 測定日時が初期表示で現在日時になっている
  - 「記録する」「クリア」ボタンが視覚的に区別され、誤タップしにくい
- 前提（仮定した点があれば明記）：
  - Step 1-1（プロジェクト初期設定：index.html / css/style.css / js/app.js 作成）は完了している
  - まだ保存処理は実装しない（Step 1-3以降で実装）。本StepではUIと最低限の初期値のみ扱う
  - 家族メンバーは当面「自分/配偶者/父/母」を固定し、将来的なカスタマイズは別Stepで対応
- 主要な制約：
  - Android PWA想定、HTML/CSS/JavaScript（フレームワーク無し）
  - レスポンシブ・アクセシビリティ（focus可視化、ラベル紐付け）を最低限担保
- 既知の不明点（あれば）：
  - 想定する最小対応ブラウザ（Chrome以外の優先度）
  - 家族メンバーのカスタマイズ方法（設定UIを作るか、定数編集で済ませるか）

## 全体ステップ構成
- Step1: UI要件の確定と画面設計（入力項目/制約/見た目の方針を固める）
- Step2: HTMLのフォーム構造を実装（セマンティクス・アクセシビリティ重視）
- Step3: CSSでモバイルファーストの見た目を実装（可読性/タップ性/レスポンシブ）
- Step4: 最低限のUI挙動を追加（日時の初期値・クリア操作）
- Step5: 実機/DevToolsで表示・操作検証（崩れ/操作性/アクセシビリティ）

---

## Step1: UI要件の確定と画面設計
### Plan 1: フォーム項目・制約の確定（UI仕様メモ作成）
- 目的：
  - 実装前に「何をどう入力させるか」「どこまでブラウザの制約で担保するか」を明確化して手戻りを防ぐ。
- 作業内容（チェックリスト）：
  - [ ] 入力項目を確定（メンバー、最高/最低血圧、脈拍、測定日時）
  - [ ] 数値レンジを確定（最高:50-250、最低:30-150、脈拍:40-200）
  - [ ] 必須/任意を確定（本Stepでは全て必須扱い想定）
  - [ ] エラー表示方針を決める（本StepはHTML制約＋簡易メッセージ、詳細はStep 1-3へ）
  - [ ] i18n方針（表示は日本語、単位表記 mmHg/bpm をどこに出すか）
- 変更対象（想定ファイル/モジュール）：
  - README.md（任意：UI仕様の短いメモ追加）
- 受け入れ基準（完了条件）：
  - 「入力項目/レンジ/必須/表示文言/単位/エラー方針」が箇条書きで残っている
- テスト/検証：
  - 仕様メモのレビュー（自分/家族利用の観点で違和感がないか）
- 依存関係・注意点：
  - Step 1-3で本格バリデーションを入れる前提。ここではUIに必要な最小限を定義する
- リスクと回避策：
  - リスク：後から項目追加（例：測定姿勢/メモ）が増える
  - 回避策：フォームを「セクション/カード」構造にして拡張しやすいDOMにする

### Plan 2: 画面レイアウト設計（モバイルの見やすさ優先）
- 目的：
  - 1画面の情報密度を最適化し、片手操作でも入力しやすいレイアウトを決める。
- 作業内容（チェックリスト）：
  - [ ] 画面構成を決める（ヘッダー＋入力カード＋（将来）一覧/グラフ領域）
  - [ ] 入力の並び順を決める（メンバー→血圧→脈拍→日時→ボタン）
  - [ ] 主要カラー（プライマリ/背景/境界線/エラー）を仮決め
  - [ ] タップ領域と余白の基準を決める（最低44px、余白8/12/16など）
- 変更対象（想定ファイル/モジュール）：
  - README.md（任意：簡易ワイヤー/レイアウト方針のメモ）
- 受け入れ基準（完了条件）：
  - DOM構造のイメージ（見出し/セクション/フォーム行/ボタン配置）が文章で説明できる
- テスト/検証：
  - スマホでの利用シーン（朝/夜の測定）を想定して並び順が自然か確認
- 依存関係・注意点：
  - 先に「最小で心地よい」フォームに寄せる（凝ったUIはPhase 4で改善）
- リスクと回避策：
  - リスク：フォームが縦に長くなり入力疲れ
  - 回避策：血圧2項目は同一行（レスポンシブで折返し）など、密度を調整

---

## Step2: HTMLのフォーム構造を実装
### Plan 1: index.htmlに入力フォームを追加（セマンティクス重視）
- 目的：
  - 後続のJS実装（保存/バリデーション）をしやすい、明確なID/nameを持つフォームを用意する。
- 作業内容（チェックリスト）：
  - [ ] mainコンテナ内に「入力フォーム」セクションを追加
  - [ ] form要素に必要な属性を付与（送信イベント用の識別）
  - [ ] メンバー選択（select）を追加（自分/配偶者/父/母）
  - [ ] 数値入力（最高/最低/脈拍）を追加（数値入力、min/max、step、入力モード）
  - [ ] 測定日時（datetime-local）を追加（ラベルとヒントを付ける）
  - [ ] ボタン2種を追加（記録：primary、クリア：secondary）
  - [ ] 各入力に label を紐付け（for/id）
  - [ ] 将来のエラー表示領域（各フィールド直下のメッセージ枠）を用意（空でもOK）
- 変更対象（想定ファイル/モジュール）：
  - index.html
- 受け入れ基準（完了条件）：
  - 画面にフォームが表示され、各フィールドが入力可能
  - ラベルをタップすると対応する入力にフォーカスする
- テスト/検証：
  - PC/スマホでフォーム操作（入力・フォーカス遷移）ができる
- 依存関係・注意点：
  - 送信動作（保存）はStep 1-3で実装するため、この段階では送信先/通信は不要
- リスクと回避策：
  - リスク：後でJSがDOMを取りづらい
  - 回避策：入力要素の命名規則（例：member/systolic/diastolic/pulse/datetime）を統一

### Plan 2: アクセシビリティと入力補助属性の付与
- 目的：
  - 高齢者含む利用を想定し、誤入力や操作ミスを減らす。
- 作業内容（チェックリスト）：
  - [ ] requiredの付与（必須入力をブラウザでガイド）
  - [ ] 数値入力に適切な入力補助（入力モード、オートコンプリート方針）
  - [ ] ヘルパーテキスト（単位、範囲）を視認しやすく配置
  - [ ] ボタンに明確なtype（送信/リセットを意図通りに）
  - [ ] 画面見出し（h1/h2）とランドマーク（header/main/section）を整える
- 変更対象（想定ファイル/モジュール）：
  - index.html
- 受け入れ基準（完了条件）：
  - キーボード操作でタブ移動が自然（上から下へ）
  - ブラウザの入力制約（範囲外/未入力）で基本的なガイドが出る
- テスト/検証：
  - Tab/Shift+Tabでフォーカスが見失われない
  - 必須未入力で送信した際、ブラウザの警告が出る（※挙動はブラウザ依存）
- 依存関係・注意点：
  - 本格的なエラー文言/表示はStep 1-3のバリデーションで整備
- リスクと回避策：
  - リスク：datetime-localのUIが端末差で使いにくい
  - 回避策：ヒント文（例：日付と時刻を選択）を追加し、将来的に代替UIも検討可能にしておく

---

## Step3: CSSでモバイルファーストの見た目を実装
### Plan 1: ベーススタイル（タイポグラフィ/余白/配色）
- 目的：
  - 「清潔感」「見やすさ」を担保するベースを作り、後で部品を増やしても統一感が崩れないようにする。
- 作業内容（チェックリスト）：
  - [ ] 全体のフォントサイズを16px以上に設定
  - [ ] 行間・見出しサイズ・余白スケールを定義
  - [ ] 背景色/カード背景/境界線/テキスト色の基本セットを定義
  - [ ] フォームカードの最大幅（例：モバイルは100%、大画面は読みやすい幅に制限）
- 変更対象（想定ファイル/モジュール）：
  - css/style.css
- 受け入れ基準（完了条件）：
  - 画面全体が読みやすく、入力領域が詰まりすぎていない
- テスト/検証：
  - DevToolsの複数画面幅で表示確認（320px〜）
- 依存関係・注意点：
  - 先に「崩れない基本形」を作り、凝った装飾は後回し
- リスクと回避策：
  - リスク：配色が薄くなりコントラスト不足
  - 回避策：主要テキスト/ボーダー/フォーカスリングは十分なコントラストを確保

### Plan 2: フォーム部品スタイル（入力/ラベル/ヘルプ/エラー）
- 目的：
  - 入力しやすさ（視認性、押しやすさ、フォーカスの分かりやすさ）を作り込む。
- 作業内容（チェックリスト）：
  - [ ] labelを明確に（太字/サイズ/余白）
  - [ ] input/selectの高さを確保（44px以上）
  - [ ] フォーカス時のアウトライン/リングを目立たせる
  - [ ] ヘルパーテキスト（範囲/単位）を小さめに配置
  - [ ] エラー表示スタイルを用意（赤系、アイコンは任意）
- 変更対象（想定ファイル/モジュール）：
  - css/style.css
- 受け入れ基準（完了条件）：
  - 指でタップしやすく、フォーカス位置が明確
  - 文字が小さすぎず、入力欄の境界が見える
- テスト/検証：
  - 実機（またはDevToolsのタッチエミュレーション）でタップ性確認
- 依存関係・注意点：
  - iOS Safari特有のフォーム見た目差異はPhase 4で調整でも可
- リスクと回避策：
  - リスク：端末フォント/ズームでレイアウト崩れ
  - 回避策：余白と行の折返しを前提にし、固定高さに依存しない

### Plan 3: ボタンスタイル（メイン/サブの明確化）
- 目的：
  - 「記録する」を主導線にしつつ、「クリア」は誤タップを避ける。
- 作業内容（チェックリスト）：
  - [ ] Primary（記録）/Secondary（クリア）の色・枠・影を定義
  - [ ] 押下状態（active）/無効状態（disabled）/フォーカス状態を定義
  - [ ] ボタンの最小サイズと余白（44px以上、左右に十分な余白）
  - [ ] モバイルではボタンを縦積み or 横並び（誤タップしない間隔を確保）
- 変更対象（想定ファイル/モジュール）：
  - css/style.css
- 受け入れ基準（完了条件）：
  - 見ただけで主ボタンが分かる
  - 連打しても視覚フィードバックがある
- テスト/検証：
  - タップで押下感がある（色/影/変形など）
- 依存関係・注意点：
  - 実際の送信処理はStep 1-3以降だが、UIとしての押下感は先に用意
- リスクと回避策：
  - リスク：誤ってクリアを押す
  - 回避策：secondaryは控えめな色＋配置を工夫（記録の近くに置きすぎない）

### Plan 4: レスポンシブ調整（入力の並びを最適化）
- 目的：
  - 画面幅に応じて「読みやすい密度」を保ち、入力の手数を減らす。
- 作業内容（チェックリスト）：
  - [ ] 最高/最低血圧を同一行（広い画面では2カラム、狭い画面は1カラム）
  - [ ] 余白・フォントサイズが極端に変わらないよう調整
  - [ ] 横向き/タブレットでの最大幅・中央寄せを調整
- 変更対象（想定ファイル/モジュール）：
  - css/style.css
- 受け入れ基準（完了条件）：
  - 320px幅でも崩れない
  - 600px以上で間延びせず、入力がまとまって見える
- テスト/検証：
  - DevToolsの複数ブレークポイントで確認
- 依存関係・注意点：
  - ブレークポイントは最小限にし、メンテしやすくする
- リスクと回避策：
  - リスク：複雑なグリッドで後の追加要素に弱くなる
  - 回避策：シンプルなflex/gridに留め、カード構造で拡張

---

## Step4: 最低限のUI挙動を追加
### Plan 1: 測定日時（datetime-local）を現在日時で初期化
- 目的：
  - 毎回の入力負担を減らし、測定直後の記録が最短手数で完了できる状態にする。
- 作業内容（チェックリスト）：
  - [ ] ページ表示時に測定日時フィールドへ現在日時をセット
  - [ ] datetime-localが要求するフォーマット（ローカル日時の分/秒扱い）に合わせる
  - [ ] 既にユーザーが値を入れている場合は上書きしない方針を決める（初期化のみ）
- 変更対象（想定ファイル/モジュール）：
  - js/app.js（最小限の初期化処理）
  - index.html（app.jsの読み込み順確認）
- 受け入れ基準（完了条件）：
  - 初回表示で日時欄に現在日時が入っている
- テスト/検証：
  - リロードして時刻が更新される
  - 端末のタイムゾーンで不自然なズレがない
- 依存関係・注意点：
  - 保存時のISO変換や正確な時刻処理はStep 1-3で実装
- リスクと回避策：
  - リスク：フォーマット不備で値がセットされない
  - 回避策：ゼロ埋め（年/月/日/時/分）を含む変換関数を1箇所にまとめる

### Plan 2: クリアボタンの最小挙動（フォームリセット＋日時再セット）
- 目的：
  - 入力ミス時に素早くやり直せるようにし、ストレスを減らす。
- 作業内容（チェックリスト）：
  - [ ] クリア押下でフォーム入力をリセット
  - [ ] リセット後、測定日時を現在日時に戻す
  - [ ] 操作後に先頭フィールド（メンバー or 最高血圧）へフォーカスを戻す
- 変更対象（想定ファイル/モジュール）：
  - js/app.js
  - index.html（ボタンの識別子付与）
- 受け入れ基準（完了条件）：
  - クリアで数値欄が空になり、日時は現在に戻る
- テスト/検証：
  - 値を入れた後にクリア→即再入力できる
- 依存関係・注意点：
  - Step 1-3でバリデーション・メッセージ表示を入れる際も挙動が破綻しないようにする
- リスクと回避策：
  - リスク：送信ボタンと挙動が混ざる（typeの誤設定）
  - 回避策：ボタンtypeとイベントハンドラの役割を明確に分ける

---

## Step5: 表示・操作検証（スマホ/レスポンシブ/アクセシビリティ）
### Plan 1: 実機/DevToolsでUI崩れと操作性を確認
- 目的：
  - 「スマホで見やすい」「入力しやすい」のDoneを実際に満たしているか検証する。
- 作業内容（チェックリスト）：
  - [ ] Chrome DevTools（Device Mode）で複数幅を確認（例：320/375/414/768）
  - [ ] Android Chrome実機でフォーム入力（片手操作、縦スクロール）
  - [ ] 日時ピッカーが使えることを確認
  - [ ] ボタン間隔が十分で誤タップしないか確認
- 変更対象（想定ファイル/モジュール）：
  - 変更なし（修正が必要なら index.html / css/style.css / js/app.js）
- 受け入れ基準（完了条件）：
  - 主要端末幅で見た目が破綻せず、入力がスムーズ
- テスト/検証：
  - 入力→クリア→入力の繰り返しでストレスがない
- 依存関係・注意点：
  - 端末差が大きい場合は「最優先はAndroid Chrome」として調整範囲を決める
- リスクと回避策：
  - リスク：実機でのみ起きるフォーム高さ/スクロール問題
  - 回避策：最初から実機で一度確認し、早めに修正

### Plan 2: キーボード/アクセシビリティ最低限チェック
- 目的：
  - フォーカス可視化やラベル付けなど、基本品質を担保する。
- 作業内容（チェックリスト）：
  - [ ] Tab移動でフォーカスが見える（フォーカスリングが消えていない）
  - [ ] ラベル関連付けが正しい（読み上げ/クリックでフォーカス）
  - [ ] 色だけに依存しない情報伝達（エラーはテキストでも示せる土台）
  - [ ] コントラストが低すぎない（特にプレースホルダ/ヘルプ）
- 変更対象（想定ファイル/モジュール）：
  - css/style.css（focus/contrast調整）
  - index.html（ラベル/補助テキストの紐付け調整）
- 受け入れ基準（完了条件）：
  - 基本操作がキーボードでも破綻せず、フォーカスを見失わない
- テスト/検証：
  - 主要フィールドのフォーカス遷移と視認性を確認
- 依存関係・注意点：
  - さらに高度なアクセシビリティ対応はPhase 4で強化可能
- リスクと回避策：
  - リスク：CSSでoutlineを消してしまう
  - 回避策：フォーカススタイルは必ず残す（カスタムリングでも可）

